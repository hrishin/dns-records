Metadata-Version: 2.4
Name: dns-records-manager
Version: 1.0.0
Summary: Automated DNS record management for enterprise environments
Home-page: https://github.com/example/dns-records-manager
Author: DNS Records Manager Team
Author-email: team@example.com
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: System Administrators
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Internet :: Name Service (DNS)
Classifier: Topic :: System :: Systems Administration
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: boto3>=1.26.0
Requires-Dist: PyYAML>=6.0
Requires-Dist: click>=8.1.0
Requires-Dist: dnspython>=2.3.0
Requires-Dist: ipaddress>=1.0.23
Requires-Dist: requests>=2.28.0
Requires-Dist: rich>=13.0.0
Requires-Dist: tabulate>=0.9.0
Requires-Dist: colorama>=0.4.6
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: flake8>=6.0.0
Requires-Dist: black>=23.0.0
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# DNS Records Manager

## Overview

The DNS Records Manager is a comprehensive, enterprise-grade automation solution for managing DNS records in the `ib.bigbank.com` zone. 
The system provides idempotent, safe, and auditable DNS record management through CSV file input, ensuring that even 
small mistakes in DNS records cannot have significant consequences.

## Key Features

### Safety & Reliability
- **Idempotent Operations**: Only updates records that have actually changed
- **Zone Protection**: Never modifies records outside the specified zone
- **Dry Run Mode**: Preview all changes before applying them
- **Comprehensive Validation**: FQDN and IPv4 format validation
- **Rollback Support**: Ability to revert changes if needed

### Automation & Efficiency
- **CSV Input Processing**: Simple CSV format with FQDN and IPv4 columns
- **Batch Operations**: Process multiple records efficiently
- **Change Analysis**: Intelligent detection of what needs to be created, updated, or deleted
- **Progress Tracking**: Real-time progress indicators and detailed logging

### Multi DNS Provider Support
- **BIND**: Traditional DNS server integration using dig and nsupdate
- **Mock Provider**: Safe testing and demonstration without affecting production
- **Extensible Architecture**: Easy to add new DNS providers

### Monitoring & Audit
- **Comprehensive Logging**: Detailed audit trail of all operations
- **Change Impact Analysis**: Risk assessment and affected services identification
- **Performance Metrics**: API response times and operation statistics
- **Health Checks**: System health monitoring and alerting

## System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           DNS Records Manager                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐  │
│  │   CSV Parser    │    │  Record Manager │    │     DNS Client          │  │
│  │                 │    │                 │    │                         │  │
│  │ • Parse CSV     │───▶│ • Analyze       │───▶│ • Unified Interface     │  │
│  │ • Validate      │    │   Changes       │    │ • Provider Selection    │  │
│  │ • Sanitize      │    │ • Zone Safety   │    │ • Error Handling        │  │
│  │                 │    │ • Idempotency   │    │                         │  │
│  └─────────────────┘    └─────────────────┘    └─────────────────────────┘  │
│           │                       │                       │                 │
│           │                       │                       │                 │
│           ▼                       ▼                       ▼                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐  │
│  │   Validators    │    │  Change Impact  │    │   DNS Providers         │  │
│  │                 │    │   Analysis      │    │                         │  │
│  │ • FQDN          │    │ • Risk Level    │    │ • BIND (Traditional)    │  │
│  │ • IPv4          │    │ • Affected      │    │ • Mock (Testing)        │  │
│  │ • CSV Structure │    │   Services      │    │ • AWS R53(extendible)   │  │
│  │                 │    │ • Rollback      │    │                         │  │
│  │                 │    │                 │    │                         │  │
│  └─────────────────┘    └─────────────────┘    └─────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Input Format

The system accepts a simple CSV file with the exact structure specified in the requirements:

```csv
FQDN,IPv4
machine1.mgmt.ib.bigbank.com,172.16.1.50
machine1.ipmi.ib.bigbank.com,172.16.20.50
db.ib.bigbank.com,10.33.0.50
netapp1.svm.ib.bigbank.com,192.168.47.11
```

## How It Works

### 1. CSV Processing
- Validates CSV structure and content
- Ensures FQDN and IPv4 format compliance
- Handles edge cases and provides clear error messages

### 2. Change Analysis
- Compares current DNS state with desired state
- Identifies records to create, update, or delete
- Ensures zone boundary safety

### 3. Idempotent Operations
- **Create**: Only if record doesn't exist
- **Update**: Only if IP address changed
- **Delete**: Only if FQDN removed from desired state
- **No Change**: Skip if identical

### 4. Safe Execution
- Dry-run mode for preview
- Comprehensive logging and audit trail

## Quick Start

### Prerequisites
- Python 3.8+
- Access to DNS provider API (BIND)
- Required environment variables or configuration files

### Installation

```bash
# Clone the repository
git clone <repository-url>
cd dns-records-manager

# Install dependencies
pip install -r requirements.txt

# Configure your DNS provider credentials
cp configs/config.example.yaml configs/config.yaml
# Edit configs/config.yaml with your settings
```

### Usage

The DNS Records Manager can be run in several ways:

#### Method 1: Direct Python execution
```bash
# Process a CSV file
python main.py --csv input.csv --zone ib.bigbank.com

# Dry run to preview changes
python main.py --csv input.csv --zone ib.bigbank.com --dry-run

# Use custom configuration file
python main.py --csv input.csv --zone ib.bigbank.com --config my-config.yaml

# Enable verbose logging
python main.py --csv input.csv --zone ib.bigbank.com --verbose
```

#### Method 2: As a Python module
```bash
# Process a CSV file
python -m dns_records_manager.cli.main --csv input.csv --zone ib.bigbank.com

# Dry run to preview changes
python -m dns_records_manager.cli.main --csv input.csv --zone ib.bigbank.com --dry-run
```

#### Method 3: After installation (recommended)
```bash
# Install the package
pip install -e .

# Use the installed command
dns-manager --csv input.csv --zone ib.bigbank.com

# Dry run to preview changes
dns-manager --csv input.csv --zone ib.bigbank.com --dry-run
```

#### CLI Options
- `--csv, -f`: CSV file containing DNS records (required)
- `--zone, -z`: DNS zone to manage (required)
- `--config, -c`: Configuration file path (default: configs/config.yaml)
- `--dry-run`: Show what would be changed without making changes
- `--verbose, -v`: Enable verbose logging

## Configuration

Create a `config.yaml` file with your DNS provider settings:

```yaml
dns_providers:
  bind:
    nameserver: 192.168.1.10  # BIND server IP address
    port: 53                  # DNS port (default: 53)
    key_file: /etc/bind/rndc.key  # Optional: RNDC key file for authenticated updates
    key_name: rndc-key        # Optional: Key name for authenticated updates
    zone_file: /etc/bind/zones/ib.bigbank.com.zone  # Optional: Zone file path

default_provider: bind
logging:
  level: INFO
  file: dns_manager.log
```

## Deployment Options

### Local Development
```bash
# Quick setup
make quick-start
make run-dry-run
make test
```
## Security Features

### Authentication & Authorization
- BIND key-based authentication
- Least privilege access control

### Network Security
- Firewall rules for DNS provider APIs
- VPN support for private networks
- Rate limiting and API protection

### Data Protection
- Secure credential storage
- Environment variable support
- Secret management integration (Vault, AWS Secrets Manager)

## Testing
### Comprehensive Test Suite
- Unit tests for all components
- Integration tests for complete workflows

  ```bash
  make test
  ```

### Compliance & Audit
- Change tracking and documentation
- Security audit trails

## Future Enhancements

### Advanced DNS Features
- DNSSEC support
- Geographic routing
- Load balancing integration
- Traffic management policies
- Backup DNS records for resiliecny - periodic or on-demaond

### Integration Capabilities
- Rest API Service to manage the DNS entires
- Configuration management tools (Ansible)
- Monitoring systems (Prometheus, Grafana)


## Summary
The system successfully addresses the core requirements:
- Automated DNS record management
- CSV input processing
- Idempotent operations
- Safe zone management
- Comprehensive logging and audit
- Multiple DNS provider support(extensible)
- CI/CD automation flow
